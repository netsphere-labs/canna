/* $Id: Imakefile,v 2.4 1996/10/22 13:35:43 kon Exp $ */
#include "../../Canna.conf"

#if defined(engineSwitch) && DoNormalLib
#undef DoNormalLib
#define DoNormalLib NO
#endif

#include <Library.tmpl>

        CANNAROOT = ../..
         LINTLIBS = ../RK/llib-lRK.ln

         INCLUDES = -I$(CANNAROOT)/include
          DEFINES = $(SIGNAL_DEFINES) -DWCHAR16 $(RKC_DEFINES) $(ENGINE_DEFS)
           HEADER = rkc.h rkcw.h
             OBJS = rkc.o convert.o wconvert.o wutil.o
             SRCS = rkc.c convert.c wconvert.c wutil.c $(HEADER)

#ifdef engineSwitch
  ENGINE_DEFS = -DENGINE_SWITCH -DDL
#endif

#if ProjectX > 5
#define LibName RKC16
#define SoRev		cannaDsoRev
#define SHLIBDIR	libCannaDir
#define USRLIBDIR	libCannaDir
#define LibHeaders 0

#include <Library.tmpl>

#else /* ProjectX */

#include <Library.tmpl>

LibraryObjectRule()

#ifdef engineSwitch
#if DoSharedLib
#if DoNormalLib
SharedLibraryTarget(RKC16,$(cannaDsoRev),$(OBJS),shared,..)
#else
SharedLibraryTarget(RKC16,$(cannaDsoRev),$(OBJS),.,.)
#endif
InstallSharedLibrary(RKC16,$(cannaDsoRev),$(libCannaDir))
#endif /* DoSharedLib */
#else /* !engineSwitch */
NormalLibraryTarget(RKC16,$(OBJS))
#endif /* !engineSwitch */

NormalLintTarget($(SRCS))
LintLibraryTarget(RKC16,$(SRCS))

#endif /* ProjectX */

depend:: $(SRCS)
LinkSourceFile(rkc.h,../RKC)
LinkSourceFile(rkcw.h,../RKC)
LinkSourceFile(rkc.c,../RKC)
LinkSourceFile(convert.c,../RKC)
LinkSourceFile(wconvert.c,../RKC)
LinkSourceFile(wutil.c,../RKC)

clean::
	$(RM) -f $(SRCS)

DependTarget()
