/* $Id: Imakefile,v 2.5 1996/10/22 12:26:34 kon Exp $ */
#include "../../Canna.conf"

#if defined(engineSwitch) && DoNormalLib
#undef DoNormalLib
#define DoNormalLib NO
#endif

        CANNAROOT = ../..
             OPTS =
         LINTLIBS = ../RK/llib-lRK.ln
         INCLUDES = -I$(CANNAROOT)/include

           DEFINES = $(SIGNAL_DEFINES) $(RKC_DEFINES) $(ENGINE_DEFS)

           HEADER = rkc.h rkcw.h
             OBJS = rkc.o convert.o wconvert.o wutil.o
             SRCS = rkc.c convert.c wconvert.c wutil.c $(HEADER)
             OPTS =

          LIBRARY = libRKC.a

#ifdef engineSwitch
  ENGINE_DEFS = -DENGINE_SWITCH -DDL
#endif

#if ProjectX > 5
#define LibName RKC
#define SoRev		cannaDsoRev
#define SHLIBDIR	libCannaDir
#define USRLIBDIR	libCannaDir
#define LibHeaders 0

#include <Library.tmpl>

#else /* ProjectX */

#include <Library.tmpl>

LibraryObjectRule()

#ifdef engineSwitch
#if DoSharedLib
#if DoNormalLib
SharedLibraryTarget(RKC,$(cannaDsoRev),$(OBJS),shared,..)
#else
SharedLibraryTarget(RKC,$(cannaDsoRev),$(OBJS),.,.)
#endif
InstallSharedLibrary(RKC,$(cannaDsoRev),$(libCannaDir))

install::
	$(RM) $(libCannaDir)/libRKC.so
	ln $(libCannaDir)/libRKC.so.$(cannaDsoRev) $(libCannaDir)/libRKC.so

AllTarget(libRKC.so)

libRKC.so: libRKC.so.$(cannaDsoRev)
	$(RM) $@
	ln $? $@

#endif /* DoSharedLib */
#else /* !engineSwitch */
NormalLibraryTarget(RKC,$(OBJS))
#endif /* !engineSwitch */

NormalLintTarget($(SRCS))

LintLibraryTarget(RKC,$(SRCS))

#endif /* X11R6 */

DependTarget()
